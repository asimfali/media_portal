"""
# Медиа Портал - Семейный архив

Веб-приложение для управления семейным архивом музыки, видео и фотографий, построенное на Django.

## Особенности

### Музыка
- Управление музыкальными треками с метаданными
- Поддержка исполнителей и альбомов
- Автоматическое извлечение продолжительности из MP3
- Обложки альбомов
- Счетчики прослушиваний

### Видео
- Загрузка и воспроизведение видео
- Превью изображения
- Категоризация видео
- Счетчики просмотров

### Фотографии
- Организация фотографий в альбомы
- Автоматическое создание миниатюр
- Извлечение EXIF данных (дата съемки, модель камеры)
- Поддержка геолокации
- Теги для поиска
- Приватные и публичные альбомы

### Общие возможности
- Категоризация всего контента
- Мощная система поиска
- Адаптивный дизайн на Tailwind CSS
- Кэширование для производительности
- SEO оптимизация с sitemap
- Панель администратора Django

## Установка

1. Клонируйте репозиторий:
```bash
git clone <repository-url>
cd media-portal
```

2. Создайте виртуальное окружение:
```bash
python -m venv venv
source venv/bin/activate  # Linux/Mac
# или
venv\Scripts\activate  # Windows
```

3. Установите зависимости:
```bash
pip install -r requirements.txt
```

4. Выполните миграции:
```bash
python manage.py makemigrations
python manage.py migrate
```

5. Создайте суперпользователя:
```bash
python manage.py createsuperuser
```

6. Запустите сервер разработки:
```bash
python manage.py runserver
```

## Структура проекта

```
media_portal/
├── media_app/
│   ├── models.py          # Модели данных
│   ├── views.py           # Представления
│   ├── urls.py            # URL маршруты
│   ├── admin.py           # Конфигурация админки
│   ├── forms.py           # Формы
│   ├── utils.py           # Утилиты
│   ├── context_processors.py  # Контекстные процессоры
│   ├── templatetags/      # Пользовательские теги
│   └── management/        # Команды управления
├── templates/             # HTML шаблоны
├── static/               # Статические файлы
├── media/                # Загруженные медиа файлы
├── scripts/              # Скрипты для обслуживания
└── requirements.txt      # Зависимости Python
```

## Конфигурация

### Основные настройки в settings.py:

- `THUMBNAIL_SIZE` - размер миниатюр (по умолчанию 300x300)
- `MAX_UPLOAD_SIZE` - максимальные размеры файлов
- `PAGINATION_SETTINGS` - настройки пагинации
- `SUPPORTED_*_FORMATS` - поддерживаемые форматы файлов

### Директории медиа файлов:
- `/media/music/` - музыкальные файлы
- `/media/music/covers/` - обложки альбомов
- `/media/videos/` - видео файлы
- `/media/videos/thumbnails/` - превью видео
- `/media/photos/` - фотографии
- `/media/photos/thumbnails/` - миниатюры фотографий
- `/media/artists/` - фотографии исполнителей

## Команды управления

### Обработка фотографий:
```bash
# Создание миниатюр и извлечение EXIF для новых фотографий
python manage.py process_photos

# Переобработка всех фотографий
python manage.py process_photos --force

# Генерация только миниатюр
python manage.py generate_thumbnails

# Генерация миниатюр нестандартного размера
python manage.py generate_thumbnails --size 500 --quality 90
```

### Резервное копирование:
```bash
# Создание резервных копий
python scripts/backup.py
```

## API Endpoints

Приложение предоставляет простые API endpoints для получения информации:

- `/api/music/<id>/` - информация о музыкальном треке
- `/api/video/<id>/` - информация о видео
- `/api/photo/<id>/` - информация о фотографии

## Производительность

Проект оптимизирован для работы на слабых VPS:

- Локальный кэш в памяти
- Оптимизированные SQL запросы с select_related/prefetch_related
- Кэширование представлений
- Отложенная загрузка изображений
- Сжатие миниатюр

## Безопасность

- Проверка типов загружаемых файлов
- Защита от XSS и CSRF
- Приватные альбомы
- Настройки безопасности для продакшена

## Расширение функциональности

### Добавление новых типов медиа:
1. Создайте модель в `models.py`
2. Добавьте представления в `views.py`
3. Создайте шаблоны
4. Обновите URL маршруты
5. Добавьте в админку

### Интеграция с внешними сервисами:
- Last.fm для музыкальных данных
- Google Photos API
- Облачное хранилище для резервных копий

## Развертывание

### Для продакшена:
1. Установите DEBUG = False
2. Настройте ALLOWED_HOSTS
3. Используйте PostgreSQL вместо SQLite
4. Настройте nginx для статических файлов
5. Используйте Gunicorn или uWSGI
6. Настройте SSL сертификаты

### Пример конфигурации nginx:
```nginx
server {
    listen 80;
    server_name your-domain.com;
    
    location /static/ {
        alias /path/to/staticfiles/;
    }
    
    location /media/ {
        alias /path/to/media/;
    }
    
    location / {
        proxy_pass http://127.0.0.1:8000;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }
}
```

## Лицензия

MIT License

## Поддержка

Для вопросов и предложений создайте issue в репозитории.
"""